<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Random Determinism</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="Aditya Mahajan" />
  <link rel="stylesheet" href="https://adityam.github.io/context-blog/css/styles.css" type="text/css" />
  <link rel="stylesheet" href="https://adityam.github.io/context-blog/css/paperclear.css" type="text/css" />
  
</head>
<body>
  
  
  
  <div id="container">
    <div id="header" role="banner">
      <span id="title"><a href="https://adityam.github.io/context-blog">Random Determinism</a></span><br />
      <span id="sub-title">A Blog about ConTeXt</span>
    </div>
    
    
    
    <div id="menu" role="navigation">
      <ul class="nav tree">
        <li>
        <strong>Recent Posts</strong>
          <ul>
            
            <li><a href="/context-blog/post/vim-btex-etex-escape/">New escape mechanism for t-vim</a></li>
            
            <li><a href="/context-blog/post/formatting-numbers/">Formatting numbers in Lua</a></li>
            
            <li><a href="/context-blog/post/new-metafun-interface/">New Metapost interface</a></li>
            
            <li><a href="/context-blog/post/exam-coverpage/">Designing exam cover page</a></li>
            
            <li><a href="/context-blog/post/setuptex/">Switching between different context versions</a></li>
            
          </ul>
        </li>
        <li><strong><a href="https://adityam.github.io/context-blog/post">All Posts</a></strong></li>
      </ul>
    </div>
    
    
    
    <div id="content" role="main">


<h1>Comibined characters in Math</h1>
<p class="post-time">Posted on October 15, 2017</p>

<p>There is a new feature in ConTeXt that replaces some <em>ascii math</em> (I am using
this term informally. The symbols do not match the <a href="http://asciimath.org">asciimath</a> symbol list).
It is enabled using<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup></p>

<pre><code><span class="Identifier">\setupmathematics</span><span class="Delimiter">[</span><span class="Type">collapsing=3</span><span class="Delimiter">]</span>
</code></pre>

<p>and replaces a combination of characters by a glyph. For example,</p>

<pre><code><span class="Identifier">\setupmathematics</span><span class="Delimiter">[</span><span class="Type">collapsing=3</span><span class="Delimiter">]</span>
A function <span class="String">$f$</span> is an increasing function
  <span class="Identifier">\startformula</span>
<span class="String">    x &lt;= y  ===&gt; f(x) &lt;= f(y)</span>
<span class="String">  </span><span class="Identifier">\stopformula</span>
</code></pre>

<p>gives</p>

<img class="center"
  alt="Example of combined characters"
  src="/context-blog/post/math-combined-characters/ex-1.png" />


<p>Notice that <code>&lt;=</code> got translated to <code>≤</code> (<code>\le</code>) and <code>===&gt;</code> got translated to
<code>⟹</code> (<code>\Longrightarrow</code>).</p>

<p>ConTeXt version <code>2017.08.15</code> or newer is needed for these mappings to work.
Here is the complete list of comining characters that are available:</p>

<table>
<thead>
<tr>
<th>shortcut</th>
<th align="left">Mapped to</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>''</code></td>
<td align="left"><code>\doubleprime</code></td>
</tr>

<tr>
<td><code>'''</code></td>
<td align="left"><code>\tripleprime</code></td>
</tr>

<tr>
<td><code>''''</code></td>
<td align="left"><code>\quadprime</code></td>
</tr>

<tr>
<td><code>::</code></td>
<td align="left"><code>\squaredots</code></td>
</tr>

<tr>
<td><code>:=</code></td>
<td align="left"><code>\colonequals</code></td>
</tr>

<tr>
<td><code>=:</code></td>
<td align="left"><code>\equalscolon</code></td>
</tr>

<tr>
<td><code>::=</code></td>
<td align="left"><code>\coloncolonequals</code></td>
</tr>

<tr>
<td><code>-:</code></td>
<td align="left"><code>\minuscolon</code></td>
</tr>

<tr>
<td><code>/&lt;</code></td>
<td align="left"><code>\nless</code></td>
</tr>

<tr>
<td><code>/&gt;</code></td>
<td align="left"><code>\ngtr</code></td>
</tr>

<tr>
<td><code>&lt;=</code></td>
<td align="left"><code>\le</code></td>
</tr>

<tr>
<td><code>/&lt;=</code></td>
<td align="left"><code>\nleq</code></td>
</tr>

<tr>
<td><code>&gt;=</code></td>
<td align="left"><code>\ge</code></td>
</tr>

<tr>
<td><code>/&gt;=</code></td>
<td align="left"><code>\ngeq</code></td>
</tr>

<tr>
<td><code>/=</code></td>
<td align="left"><code>\neq</code></td>
</tr>

<tr>
<td><code>=&gt;</code></td>
<td align="left"><code>\eqgtr</code></td>
</tr>

<tr>
<td><code>=&lt;</code></td>
<td align="left"><code>\eqless</code></td>
</tr>

<tr>
<td><code>&lt;=&gt;</code></td>
<td align="left"><code>\lesseqqgtr</code></td>
</tr>

<tr>
<td><code>&gt;=&lt;</code></td>
<td align="left"><code>\gtreqqless</code></td>
</tr>

<tr>
<td>`</td>
<td align="left"></td>
</tr>

<tr>
<td><code>&lt;&lt;</code></td>
<td align="left"><code>\ll</code></td>
</tr>

<tr>
<td>&rsquo;&gt;&gt;`</td>
<td align="left"><code>\gg</code></td>
</tr>

<tr>
<td><code>&lt;&lt;&lt;</code></td>
<td align="left"><code>\lll</code></td>
</tr>

<tr>
<td><code>&gt;&gt;&gt;</code></td>
<td align="left"><code>\ggg</code></td>
</tr>

<tr>
<td><code>==</code></td>
<td align="left"><code>\equiv</code></td>
</tr>

<tr>
<td><code>/==</code></td>
<td align="left"><code>\nequiv</code></td>
</tr>

<tr>
<td><code>===</code></td>
<td align="left"><code>\eqequiv</code> (a virtual character for mapping purposes)</td>
</tr>

<tr>
<td><code>-&gt;</code></td>
<td align="left"><code>\rightarrow</code></td>
</tr>

<tr>
<td><code>&lt;-</code></td>
<td align="left"><code>\leftarrow</code></td>
</tr>

<tr>
<td><code>&lt;-&gt;</code></td>
<td align="left"><code>\leftrightarrow</code></td>
</tr>

<tr>
<td><code>--&gt;</code></td>
<td align="left"><code>\longleftarrow</code></td>
</tr>

<tr>
<td><code>&lt;--</code></td>
<td align="left"><code>\longrightarrow</code></td>
</tr>

<tr>
<td><code>&lt;--&gt;</code></td>
<td align="left"><code>\longleftrightarrow</code></td>
</tr>

<tr>
<td><code>==&gt;</code></td>
<td align="left"><code>\Rightarrow</code></td>
</tr>

<tr>
<td><code>&lt;==</code></td>
<td align="left"><code>\Leftarrow</code></td>
</tr>

<tr>
<td><code>&lt;==&gt;</code></td>
<td align="left"><code>\Leftrightarrow</code></td>
</tr>

<tr>
<td><code>===&gt;</code></td>
<td align="left"><code>\Longrightarrow</code></td>
</tr>

<tr>
<td><code>&lt;===</code></td>
<td align="left"><code>\Longleftarrow</code></td>
</tr>

<tr>
<td><code>&lt;===&gt;</code></td>
<td align="left"><code>\Longleftrightarrow</code></td>
</tr>

<tr>
<td><code>&#124;&#124;</code></td>
<td align="left"><code>\doubleverticalbar</code></td>
</tr>

<tr>
<td><code>&#124;&#124;&#124;</code></td>
<td align="left"><code>\tripleverticalbar</code></td>
</tr>
</tbody>
</table>

<p>If the font does not contain the appropriate glyph, then the above
will silently fail (e.g., Latin Modern Math does not have <code>::=</code>). If something
goes wrong, partial debug information is available using:</p>

<pre><code><span class="Identifier">\enabletrackers</span><span class="Delimiter">[</span><span class="Type">math.collapsing</span><span class="Delimiter">]</span>
</code></pre>

<p>This shows the following tracking information on the console (and also
writes it to the log file)</p>
<pre><code>mathematics     &gt; collapsing &gt; enabling math collapsing
mathematics     &gt; collapsing &gt; creating ligature ″ (U+02033) from specials
mathematics     &gt; collapsing &gt; creating ligature ‴ (U+02034) from specials
mathematics     &gt; collapsing &gt; creating ligature ⁗ (U+02057) from specials
mathematics     &gt; collapsing &gt; creating ligature ∷ (U+02237) from mathlist
mathematics     &gt; collapsing &gt; creating ligature ≔ (U+02254) from mathlist
mathematics     &gt; collapsing &gt; creating ligature ≕ (U+02255) from mathlist
mathematics     &gt; collapsing &gt; creating ligature ⩴ (U+02A74) from specials
...</code></pre>
<p>Notice that there are two mechanisms for collapsing <code>mathlist</code> and <code>specials</code>
(I don&rsquo;t quite understand the difference except that the <code>specials</code> mechanism
is old and related for some font stuff while the <code>mathlist</code> mechanism is new).
The relevant information is available in <code>char-def.lua</code>. For example, for
<code>::=</code> (which is a <code>special</code>), the entry in <code>char-def.lua</code> is</p>

<pre><code>[<span class="Number">0x2A74</span>]=<span class="Structure">{</span>
  category=<span class="String">&quot;sm&quot;</span>,
  description=<span class="String">&quot;DOUBLE COLON EQUAL&quot;</span>,
  direction=<span class="String">&quot;on&quot;</span>,
  linebreak=<span class="String">&quot;al&quot;</span>,
  mathclass=<span class="String">&quot;relation&quot;</span>,
  mathname=<span class="String">&quot;coloncolonequals&quot;</span>,
  specials=<span class="Structure">{</span> <span class="String">&quot;compat&quot;</span>, <span class="Number">0x3A</span>, <span class="Number">0x3A</span>, <span class="Number">0x3D</span> <span class="Structure">}</span>,
  unicodeslot=<span class="Number">0x2A74</span>,
 <span class="Structure">}</span>,
</code></pre>

<p>On the other hand, for <code>::</code> (which is a <code>mathlist</code>), the entry in
<code>char-def.lua</code> is:</p>

<pre><code>[<span class="Number">0x2237</span>]=<span class="Structure">{</span>
  adobename=<span class="String">&quot;proportion&quot;</span>,
  category=<span class="String">&quot;sm&quot;</span>,
  cjkwd=<span class="String">&quot;a&quot;</span>,
  description=<span class="String">&quot;PROPORTION&quot;</span>,
  direction=<span class="String">&quot;on&quot;</span>,
  linebreak=<span class="String">&quot;ai&quot;</span>,
  mathclass=<span class="String">&quot;relation&quot;</span>,
  mathname=<span class="String">&quot;squaredots&quot;</span>,
  mathlist=<span class="Structure">{</span> <span class="Number">0x3A</span>, <span class="Number">0x3A</span> <span class="Structure">}</span>,
  unicodeslot=<span class="Number">0x2237</span>,
 <span class="Structure">}</span>,
</code></pre>

<p>To add additional such shortcuts, simply add the <code>mathlist = { ...
}</code> line in <code>char-def.lua</code> and regenerate the format file.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">In principle, there are multiple types of collapsing. Using <code>collapsing=1</code> uses <code>specials</code> for collapsing, using <code>collapsing=2</code> uses <code>specials + mathlist</code> (i.e., specials get preference over mathlist) and using <code>collapsing=3</code> uses <code>mathlist + specials</code>. Here specials and mathlist refer to the internal implementation of the feature in <code>char-def.lua</code>.
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
</ol>
</div>

<hr />

<p class="nav">

<a href="/context-blog/post/typesetting-differential-equations/">&nbsp;&lt;Typesetting differential equations</a>


| <a href="/context-blog/post/using-fontawesome/">Using Font Awesome></a>

</p>

<p>
This entry was posted in 

<a href="https://adityam.github.io/context-blog/categories/mathematics">
  Mathematics</a> 
and tagged 

<a href="https://adityam.github.io/context-blog/tags/asciimath">asciimath</a>.
 
</p>

<div id="disqus_thread"></div>
<div id="disqus_comments">
  <button onclick="load_disqus()">Show Comments</button>
</div>
<script>
    function load_disqus() { 
        var d = document, s = d.createElement('script');
        s.src = '//random-determinism.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        var load_button = document.getElementById('disqus_comments');
        load_button.parentNode.removeChild(load_button);
    };
   (function () {
        var d = document, s = d.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//random-determinism.disqus.com/count.js';
        (d.head || d.body).appendChild(s);
    }()); 
</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




    </div>
    
    
    
    <div id="pied" role="contentinfo">
      Content distributed under <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a> license
    </div>
  </div>
</body>
</html>


